<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Documentation Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.simplex.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Documentation</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-client_fah-client.html">client/fah-client</a></li><li><a href="module-commands_command.html">commands/command</a></li><li><a href="module-commands_control.html">commands/control</a></li><li><a href="module-commands_helpers_tokenizer.html">commands/helpers/tokenizer</a></li><li><a href="module-commands_options.html">commands/options</a></li><li><a href="module-commands_slots.html">commands/slots</a></li><li><a href="module-commands_updates.html">commands/updates</a></li><li><a href="module-commands_work.html">commands/work</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-client_fah-client-FahClient.html">client/fah-client~FahClient</a></li><li><a href="module-commands_command-Command.html">commands/command~Command</a></li><li><a href="module-commands_helpers_tokenizer-Tokenizer.html">commands/helpers/tokenizer~Tokenizer</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-client_fah-client-FahClient.html#event:message">client/fah-client~FahClient#event:message</a></li><li><a href="module-client_fah-client-FahClient.html#event:ready">client/fah-client~FahClient#event:ready</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	





    <section class="readme-section">
        <article><h1>fah-client</h1>
<p><a href="https://github.com/standard/standard"><img src="https://cdn.rawgit.com/standard/standard/master/badge.svg" alt="JavaScript Style Guide"></a></p>
<p>The Folding@home project's background program (FahClient) provides a telnet-based <a href="https://github.com/FoldingAtHome/fah-control/wiki/3rd-party-FAHClient-API">third party client interface</a> for client programs to monitor the current folding status.
This interface is meant to be used by other software as well as by humans, which results in an API that feels more like a shell frontend.
A client program must generate syntactically correct string commands and parse the responses coming from FahClient.
Partially, the responses are serialized in a data serialization format called PYON.
PYON parsing is done by my <a href="https://github.com/tamaracha/node-fah-pyon">fah-pyon package</a>.
Fah-client is intended to be an abstraction of that string-based shell interface for node.js.
It contains helper functions and types to generate fah commands and connect to the fah interface.</p>
<h2>Install</h2>
<p>Currently this is not published to npm, but there are installable package tarballs attached to the github releases.
Add the <a href="https://github.com/tamaracha/node-fah-client/releases/download/v0.5.0/fah-client-0.5.0.tgz">current release package</a> to your npm project.
Make sure you have folding@home installed and running on your system before using this package.</p>
<pre class="prettyprint source lang-sh"><code>npm i https://github.com/tamaracha/node-fah-client/releases/download/v&lt;version>/fah-client-&lt;version>.tgz
</code></pre>
<h2>Usage</h2>
<p>The package consists of some subpackages:</p>
<ul>
<li>fah-client/commands handles the raw telnet input and output strings and contains the logic for command serialization and response parsing.</li>
<li>fah-client/client contains the <code>FahClient</code> class which connects to the fah interface and utilizes fah-client/commands for the string processing work. Users can implement their own client around the commands subpackage.</li>
</ul>
<h3>Commands and parsing</h3>
<p>The commands subpackage is built around the <code>Command</code> and <code>Tokenizer</code> class.
A command contains a textual input representation for the fah interface and information about the expected response type.
Users of this package are not supposed to create these Command objects manually, but should use the factory methods provided in this package.</p>
<p><code>Tokenizer</code> splits an output string from the fah interface into a sequence of objects (tokens) that fulfill the Message type in the <a href="https://github.com/tamaracha/node-fah-pyon">fah-pyon package</a>.
Clients can operate on this token stream without having to care about strings.
Most responses are either PyON messages or empty strings, so tokens can be one of the following:</p>
<ul>
<li>PyON messages output by fah-pyon's <code>safeLoad</code> function</li>
<li>empty response messages: <code>{ type: 'empty', payload: null }</code></li>
<li>prompts: <code>{ type: 'prompt', payload: '\n&gt; ' }</code></li>
</ul>
<h3>Client usage</h3>
<p>A FahClient instance inputs the command text to the fah interface and tries to parse the response.
It emits the tokens as token event, and tokens that are not part of a command response as message event.</p>
<pre class="prettyprint source lang-node"><code>/** demo.mjs */
'use strict'
// ESM or typescript
import { FahClient, work } from 'fah-client'
// or commonjs
// const { FahClient, work } = require('fah-client')

// create commands for getting units and simulation info
const unitsCmd = work.units()
const simulationCmd = work.simulation(0)

async function demo () {
  try {
  // connect to the fah interface and display the welcome message
    const { fah, init } = await fah.connect()
    console.log(init)
    // if connected, fetch units in queue
    const units = await fah.dispatch(unitsCmd)
    console.log(units)
    // Fetch simulation data in slot 0 â€¦
    const simulation = await fah.dispatch(simulationCmd)
    console.log(simulation)
    // FahClient takes care of sending commands sequentially, so dispatch can be called synchronously
    await Promise.all([
      fah.dispatch(unitsCmd)
      fah.dispatch(simulationCmd)
    ]).then(([unit, simulation]) => console.log(unit, simulation))
    // After work is done, disconnect from fah interface
    await fah.disconnect()
    console.log('Goodbye')
  } catch (e) {
    console.log(e)
  }
}
demo()
</code></pre>
<h2>Docs</h2>
<p><a href="https://tamaracha.github.io/node-fah-client">API docs</a></p>
<h2>License</h2>
<p>MIT</p></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a>
	
		on 2020-05-04T16:47:11+00:00
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : false,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>